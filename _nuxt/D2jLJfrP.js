import{_ as $,r,k as _,o as A,x as p,z as t,J as k,K as H,L as b,M as D,N as L,A as c,O as P,P as S,Q as f,y as m}from"./DrKmWEop.js";import{_ as I,a as T}from"./Cex5FOTM.js";const j=["disabled"],F=["disabled"],K={id:"todo-list"},U=["onClick"],q=["onClick","disabled"],E={id:"progress-bar-container"},J={id:"progress-label"},G={id:"progress-bar"},N={id:"days-counter"},O={class:"calendar-text"},Q={id:"days-count"},R={id:"loader"},u="https://script.google.com/macros/s/AKfycbz_ls8nqd7ArsdeHJS2BotDasBAr4sP4O08LivCtdFswJPulsuswrnnQ7SrXW7hwxmi/exec",W={__name:"index",setup(X){const i=r(""),o=r([]),l=r(!1),h=r(!1),g=r(0),w=_(()=>o.value.filter(s=>s.checked===!0||s.checked==="true").length),d=_(()=>o.value.length===0?0:Math.round(w.value/o.value.length*100));function x(s){return s.checked===!0||s.checked==="true"}function C(){l.value=!0,fetch(`${u}?action=list`).then(s=>s.json()).then(s=>{o.value=s}).catch(()=>alert("載入失敗")).finally(()=>l.value=!1)}function y(){if(!i.value)return;const s="temp-"+Date.now(),e={id:s,content:i.value,checked:!1};o.value.push(e),i.value="",fetch(`${u}?action=add&content=${encodeURIComponent(e.content)}`).then(a=>a.json()).then(a=>{const n=o.value.findIndex(v=>v.id===s);n!==-1&&a.id&&(o.value[n].id=a.id)}).catch(()=>{o.value=o.value.filter(a=>a.id!==s),alert("新增失敗")})}function M(s){const e=o.value[s],a=e.checked;e.checked=!a,d.value===100&&z(),fetch(`${u}?action=update&id=${e.id}&checked=${e.checked}`).then(n=>n.json()).then(n=>{if(n.status!=="success")throw new Error}).catch(()=>{e.checked=a,alert("更新失敗")})}function V(s){if(!confirm("確定刪除？"))return;const e=o.value.findIndex(n=>n.id===s),a=o.value[e];o.value.splice(e,1),fetch(`${u}?action=delete&id=${s}`).then(n=>n.json()).then(n=>{if(n.status!=="success")throw new Error}).catch(()=>{o.value.splice(e,0,a),alert("刪除失敗")})}function z(){h.value=!1,requestAnimationFrame(()=>{h.value=!0})}function B(){const s=new Date("2025-07-15"),e=new Date;s.setHours(0,0,0,0),e.setHours(0,0,0,0);const a=e-s;g.value=Math.floor(a/(1e3*60*60*24))}return A(()=>{C(),B()}),(s,e)=>(m(),p("div",{class:f(["container",{"pink-mode":d.value===100}])},[e[5]||(e[5]=t("h1",null,[t("a",{href:"https://docs.google.com/spreadsheets/d/1MMnLWBfr-XKPe99Pm5mKrlj0aI1wpG2LPC8hPKLog2U/edit?usp=sharing",target:"_blank"}," 待辦清單 ")],-1)),t("form",{id:"todo-form",autocomplete:"off",onSubmit:b(y,["prevent"])},[k(t("input",{type:"text",id:"new-todo",placeholder:"新增待辦...","onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),disabled:l.value},null,8,j),[[H,i.value,void 0,{trim:!0}]]),t("button",{class:"add-btn",type:"submit",disabled:l.value},"新增",8,F)],32),t("ul",K,[(m(!0),p(D,null,L(o.value,(a,n)=>(m(),p("li",{key:a.id,class:f({checked:x(a)}),onClick:v=>M(n)},[t("span",null,c(a.content),1),t("button",{class:"del-btn",onClick:b(v=>V(a.id),["stop"]),disabled:l.value},e[1]||(e[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"currentColor",class:"bi bi-trash",viewBox:"0 0 16 16"},[t("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"}),t("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"})],-1)]),8,q)],10,U))),128))]),t("div",E,[t("div",J," 已完成 "+c(w.value)+" / "+c(o.value.length)+"（"+c(d.value)+"%） ",1),t("div",G,[t("div",{id:"progress-bar-fill",style:P({width:d.value+"%",backgroundColor:d.value===100?"#f39083":"#69491A"})},null,4)])]),e[6]||(e[6]=t("div",{class:"deco-container"},[t("img",{src:I,class:"deco-items",id:"orange-flower"}),t("img",{src:T,class:"deco-items",id:"pink-flower"})],-1)),t("div",N,[e[2]||(e[2]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"calendar-icon",viewBox:"0 0 16 16"},[t("path",{d:"M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M2 2a1 1 0 0 0-1 1v1h14V3a1 1 0 0 0-1-1zm13 3H1v9a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1z"})],-1)),t("span",O,[t("span",Q,"D+"+c(g.value),1)])]),k(t("div",R,e[3]||(e[3]=[t("span",{class:"loader-icon"},null,-1),t("span",{style:{"margin-left":"8px"}},"載入中...",-1)]),512),[[S,l.value]]),t("div",{id:"heart-burst",class:f({animate:h.value})},e[4]||(e[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"heart-icon",viewBox:"0 0 16 16",fill:"#FF69B4"},[t("path",{d:"m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143q.09.083.176.171a3 3 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15"})],-1)]),2)],2))}},ee=$(W,[["__scopeId","data-v-60781ae5"]]);export{ee as default};
