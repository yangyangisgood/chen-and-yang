import{J as x,_ as $,r as c,k as _,o as H,x as p,z as t,K as k,L,M as b,N as D,O as P,A as r,P as S,Q as I,R as f,y as g}from"./lQ5v_w6Z.js";const T=x("/image/f-orange.png"),j=x("/image/f-pink.png"),F=["disabled"],K=["disabled"],U={id:"todo-list"},R=["onClick"],q=["onClick","disabled"],E={id:"progress-bar-container"},J={id:"progress-label"},G={id:"progress-bar"},N={id:"days-counter"},O={class:"calendar-text"},Q={id:"days-count"},W={id:"loader"},u="https://script.google.com/macros/s/AKfycbz_ls8nqd7ArsdeHJS2BotDasBAr4sP4O08LivCtdFswJPulsuswrnnQ7SrXW7hwxmi/exec",X={__name:"index",setup(Y){const i=c(""),a=c([]),l=c(!1),h=c(!1),m=c(0),w=_(()=>a.value.filter(s=>s.checked===!0||s.checked==="true").length),d=_(()=>a.value.length===0?0:Math.round(w.value/a.value.length*100));function C(s){return s.checked===!0||s.checked==="true"}function M(){l.value=!0,fetch(`${u}?action=list`).then(s=>s.json()).then(s=>{a.value=s}).catch(()=>alert("載入失敗")).finally(()=>l.value=!1)}function y(){if(!i.value)return;const s="temp-"+Date.now(),e={id:s,content:i.value,checked:!1};a.value.push(e),i.value="",fetch(`${u}?action=add&content=${encodeURIComponent(e.content)}`).then(o=>o.json()).then(o=>{const n=a.value.findIndex(v=>v.id===s);n!==-1&&o.id&&(a.value[n].id=o.id)}).catch(()=>{a.value=a.value.filter(o=>o.id!==s),alert("新增失敗")})}function V(s){const e=a.value[s],o=e.checked;e.checked=!o,d.value===100&&A(),fetch(`${u}?action=update&id=${e.id}&checked=${e.checked}`).then(n=>n.json()).then(n=>{if(n.status!=="success")throw new Error}).catch(()=>{e.checked=o,alert("更新失敗")})}function z(s){if(!confirm("確定刪除？"))return;const e=a.value.findIndex(n=>n.id===s),o=a.value[e];a.value.splice(e,1),fetch(`${u}?action=delete&id=${s}`).then(n=>n.json()).then(n=>{if(n.status!=="success")throw new Error}).catch(()=>{a.value.splice(e,0,o),alert("刪除失敗")})}function A(){h.value=!1,requestAnimationFrame(()=>{h.value=!0})}function B(){const s=new Date("2025-07-15"),e=new Date;s.setHours(0,0,0,0),e.setHours(0,0,0,0);const o=e-s;m.value=Math.floor(o/(1e3*60*60*24))}return console.log("script loaded"),H(()=>{M(),B(),console.log("onMounted triggered")}),(s,e)=>(g(),p("div",{class:f(["container",{"pink-mode":d.value===100}])},[e[5]||(e[5]=t("h1",null,[t("a",{href:"https://docs.google.com/spreadsheets/d/1MMnLWBfr-XKPe99Pm5mKrlj0aI1wpG2LPC8hPKLog2U/edit?usp=sharing",target:"_blank"}," 待辦清單 ")],-1)),t("form",{id:"todo-form",autocomplete:"off",onSubmit:b(y,["prevent"])},[k(t("input",{type:"text",id:"new-todo",placeholder:"新增待辦...","onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o),disabled:l.value},null,8,F),[[L,i.value,void 0,{trim:!0}]]),t("button",{class:"add-btn",type:"submit",disabled:l.value},"新增",8,K)],32),t("ul",U,[(g(!0),p(D,null,P(a.value,(o,n)=>(g(),p("li",{key:o.id,class:f({checked:C(o)}),onClick:v=>V(n)},[t("span",null,r(o.content),1),t("button",{class:"del-btn",onClick:b(v=>z(o.id),["stop"]),disabled:l.value},e[1]||(e[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"currentColor",class:"bi bi-trash",viewBox:"0 0 16 16"},[t("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"}),t("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"})],-1)]),8,q)],10,R))),128))]),t("div",E,[t("div",J," 已完成 "+r(w.value)+" / "+r(a.value.length)+"（"+r(d.value)+"%） ",1),t("div",G,[t("div",{id:"progress-bar-fill",style:S({width:d.value+"%",backgroundColor:d.value===100?"#f39083":"#69491A"})},null,4)])]),e[6]||(e[6]=t("div",{class:"deco-container"},[t("img",{src:T,class:"deco-items",id:"orange-flower"}),t("img",{src:j,class:"deco-items",id:"pink-flower"})],-1)),t("div",N,[e[2]||(e[2]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"calendar-icon",viewBox:"0 0 16 16"},[t("path",{d:"M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M2 2a1 1 0 0 0-1 1v1h14V3a1 1 0 0 0-1-1zm13 3H1v9a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1z"})],-1)),t("span",O,[t("span",Q,"D+"+r(m.value),1)])]),k(t("div",W,e[3]||(e[3]=[t("span",{class:"loader-icon"},null,-1),t("span",{style:{"margin-left":"8px"}},"載入中...",-1)]),512),[[I,l.value]]),t("div",{id:"heart-burst",class:f({animate:h.value})},e[4]||(e[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"heart-icon",viewBox:"0 0 16 16",fill:"#FF69B4"},[t("path",{d:"m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143q.09.083.176.171a3 3 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15"})],-1)]),2)],2))}},ee=$(X,[["__scopeId","data-v-7e7dfd56"]]);export{ee as default};
