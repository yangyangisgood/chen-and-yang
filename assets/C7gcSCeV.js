import{_ as S,r as v,o as $,x as V,z as t,B as o,L as O,D as u,O as A,P as E,C as a,R as F,T as w,g as i,y as f,A as r,U as x,N as G,V as J}from"./DcY-9_HX.js";const j={class:"container"},I=["disabled"],K={id:"argue-list"},R=["onClick"],P={key:0},q={key:0},z={style:{"text-align":"right"}},Z={id:"loader"},D="https://script.google.com/macros/s/AKfycbxn7DMZLJTLAVeKMpCC41fIsU8r3BxUJCM_8JiGbvG1lqsn_3BRyFmL1sTCNcE5lwGK/exec",H={__name:"index",setup(Q){const h=v([]),c=v(!1),g=v(!1),d=v(null),p=v(!1),n=v({title:"",date:"",content:"",yang_thoughts:"",chen_thoughts:"",conclusion:"",solution:""});function U(s){const e=new Date(s);return isNaN(e)?s:new Date(e.getTime()+8*60*60*1e3).toISOString().split("T")[0]}function k(){p.value=!0,fetch(`${D}?action=list`).then(s=>s.json()).then(s=>{h.value=s.reverse().map(e=>({...e,date:U(e.date)}))}).catch(()=>w.error("載入失敗")).finally(()=>p.value=!1)}function M(){g.value=!0,Object.assign(n.value,{title:"",date:"",content:"",yang_thoughts:"",chen_thoughts:"",conclusion:"",solution:""})}function L(){p.value=!0;const s={...n.value,timestamp:Date.now()};fetch(`${D}?action=add`,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(s),redirect:"follow"}).then(e=>e.json()).then(e=>{if(e.status==="success")w.success("新增成功"),g.value=!1,k();else throw new Error}).catch(()=>w.error("新增失敗")).finally(()=>p.value=!1)}function N(s){d.value=s,c.value=!0}return $(k),(s,e)=>{const b=i("el-dialog"),_=i("el-input"),m=i("el-form-item"),T=i("el-date-picker"),y=i("el-radio"),B=i("el-radio-group"),C=i("el-button"),Y=i("el-form");return f(),V("div",j,[t("button",{class:"back-btn",onClick:e[0]||(e[0]=l=>s.$router.push("/"))},e[11]||(e[11]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-chevron-compact-left",viewBox:"0 0 16 16"},[t("path",{"fill-rule":"evenodd",d:"M9.224 1.553a.5.5 0 0 1 .223.67L6.56 8l2.888 5.776a.5.5 0 1 1-.894.448l-3-6a.5.5 0 0 1 0-.448l3-6a.5.5 0 0 1 .67-.223"})],-1),u(" 返回 ")])),e[24]||(e[24]=t("h1",null,"吵架記錄",-1)),t("button",{class:"add-btn",onClick:M,disabled:p.value},"新增",8,I),t("ul",K,[(f(!0),V(A,null,E(h.value,l=>(f(),V("li",{key:l.timestamp,class:"argue-item",onClick:W=>N(l)},[t("strong",null,r(l.title),1),u("｜"+r(l.date),1)],8,R))),128))]),o(b,{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=l=>c.value=l),title:d.value?d.value.title:"詳細內容",width:"90%"},{default:a(()=>[d.value?(f(),V("div",P,[t("p",null,[e[12]||(e[12]=t("strong",null,"🗓 日期：",-1)),u(r(d.value.date),1)]),t("p",null,[e[13]||(e[13]=t("strong",null,"📄 內容：",-1)),u(r(d.value.content),1)]),t("p",null,[e[14]||(e[14]=t("strong",null,"🐑 洋的想法：",-1)),u(r(d.value.yang_thoughts),1)]),t("p",null,[e[15]||(e[15]=t("strong",null,"🧸 陳的想法：",-1)),u(r(d.value.chen_thoughts),1)]),t("p",null,[e[16]||(e[16]=t("strong",null,"📌 結論：",-1)),u(r(d.value.conclusion),1)]),d.value.conclusion==="有共識與解決方法"?(f(),V("p",q,[e[17]||(e[17]=t("strong",null,"🛠 解決方案：",-1)),u(r(d.value.solution),1)])):x("",!0)])):x("",!0)]),_:1},8,["modelValue","title"]),o(b,{modelValue:g.value,"onUpdate:modelValue":e[10]||(e[10]=l=>g.value=l),title:"新增吵架紀錄",width:"90%"},{default:a(()=>[o(Y,{onSubmit:G(L,["prevent"]),"label-width":"90px"},{default:a(()=>[o(m,{label:"標題"},{default:a(()=>[o(_,{modelValue:n.value.title,"onUpdate:modelValue":e[2]||(e[2]=l=>n.value.title=l),placeholder:"請輸入"},null,8,["modelValue"])]),_:1}),o(m,{label:"日期"},{default:a(()=>[o(T,{modelValue:n.value.date,"onUpdate:modelValue":e[3]||(e[3]=l=>n.value.date=l),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",type:"date",placeholder:"請選擇日期"},null,8,["modelValue"])]),_:1}),o(m,{label:"內容"},{default:a(()=>[o(_,{modelValue:n.value.content,"onUpdate:modelValue":e[4]||(e[4]=l=>n.value.content=l),type:"textarea",placeholder:"請輸入"},null,8,["modelValue"])]),_:1}),o(m,{label:"洋的想法"},{default:a(()=>[o(_,{modelValue:n.value.yang_thoughts,"onUpdate:modelValue":e[5]||(e[5]=l=>n.value.yang_thoughts=l),type:"textarea",placeholder:"請輸入"},null,8,["modelValue"])]),_:1}),o(m,{label:"陳的想法"},{default:a(()=>[o(_,{modelValue:n.value.chen_thoughts,"onUpdate:modelValue":e[6]||(e[6]=l=>n.value.chen_thoughts=l),type:"textarea",placeholder:"請輸入"},null,8,["modelValue"])]),_:1}),o(m,{label:"結論"},{default:a(()=>[o(B,{modelValue:n.value.conclusion,"onUpdate:modelValue":e[7]||(e[7]=l=>n.value.conclusion=l)},{default:a(()=>[o(y,{label:"有共識與解決方法"},{default:a(()=>e[18]||(e[18]=[u("有共識與解決方法")])),_:1,__:[18]}),o(y,{label:"了解彼此想法"},{default:a(()=>e[19]||(e[19]=[u("了解彼此想法")])),_:1,__:[19]}),o(y,{label:"未解決待追蹤"},{default:a(()=>e[20]||(e[20]=[u("未解決待追蹤")])),_:1,__:[20]})]),_:1},8,["modelValue"])]),_:1}),n.value.conclusion==="有共識與解決方法"?(f(),J(m,{key:0,label:"解決方案"},{default:a(()=>[o(_,{modelValue:n.value.solution,"onUpdate:modelValue":e[8]||(e[8]=l=>n.value.solution=l),type:"textarea",placeholder:"請輸入"},null,8,["modelValue"])]),_:1})):x("",!0),t("div",z,[o(C,{onClick:e[9]||(e[9]=l=>g.value=!1)},{default:a(()=>e[21]||(e[21]=[u("取消")])),_:1,__:[21]}),o(C,{type:"primary","native-type":"submit",loading:p.value},{default:a(()=>e[22]||(e[22]=[u("送出")])),_:1,__:[22]},8,["loading"])])]),_:1})]),_:1},8,["modelValue"]),O(t("div",Z,e[23]||(e[23]=[t("span",{class:"loader-icon"},null,-1),t("span",{style:{"margin-left":"8px",color:"#252c74"}},"載入中...",-1)]),512),[[F,p.value]])])}}},ee=S(H,[["__scopeId","data-v-6125d74f"]]);export{ee as default};
