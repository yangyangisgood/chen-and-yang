import{_ as A}from"./CjHayypu.js";import{_ as E,r as v,o as G,x as c,B as t,z as o,L as J,O,P as $,C as a,R as I,T as x,g as i,y as f,D as u,A as r,U as h,N as K,V as R}from"./CfDvJfcy.js";const j={class:"container"},P=["disabled"],q={id:"argue-list"},z=["onClick"],H={key:0},Z={key:0},Q={style:{"text-align":"right"}},W={id:"loader"},M="https://script.google.com/macros/s/AKfycbxn7DMZLJTLAVeKMpCC41fIsU8r3BxUJCM_8JiGbvG1lqsn_3BRyFmL1sTCNcE5lwGK/exec",X={__name:"index",setup(ee){const w=v([]),V=v(!1),_=v(!1),s=v(null),m=v(!1),n=v({title:"",date:"",content:"",yang_thoughts:"",chen_thoughts:"",conclusion:"",solution:""});function D(){n.value={title:"",date:"",content:"",yang_thoughts:"",chen_thoughts:"",conclusion:"",solution:""}}function N(d){const e=new Date(d);return isNaN(e)?d:new Date(e.getTime()+8*60*60*1e3).toISOString().split("T")[0]}function k(){m.value=!0,D(),fetch(`${M}?action=list`).then(d=>d.json()).then(d=>{w.value=d.reverse().map(e=>({...e,date:N(e.date)}))}).catch(()=>x.error("載入失敗")).finally(()=>m.value=!1)}function T(){_.value=!0}function B(){m.value=!0;const d={...n.value,timestamp:Date.now()};fetch(`${M}?action=add`,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(d),redirect:"follow"}).then(e=>e.json()).then(e=>{if(e.status==="success")x.success("新增成功"),_.value=!1,k();else throw new Error}).catch(()=>x.error("新增失敗")).finally(()=>m.value=!1)}function L(d){s.value=d,V.value=!0}return G(k),(d,e)=>{const C=A,U=i("el-dialog"),g=i("el-input"),p=i("el-form-item"),Y=i("el-date-picker"),y=i("el-radio"),S=i("el-radio-group"),b=i("el-button"),F=i("el-form");return f(),c("div",j,[t(C,{title:"吵架紀錄","page-color":"discussion-record"}),o("button",{class:"add-btn",onClick:T,disabled:m.value},"新增",8,P),o("ul",q,[(f(!0),c(O,null,$(w.value,l=>(f(),c("li",{key:l.timestamp,class:"argue-item",onClick:le=>L(l)},[o("strong",null,r(l.title),1),u("｜"+r(l.date),1)],8,z))),128))]),t(U,{modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=l=>V.value=l),title:s.value?s.value.title:"詳細內容",width:"90%"},{default:a(()=>[s.value?(f(),c("div",H,[o("p",null,[e[10]||(e[10]=o("strong",null,"🗓 日期：",-1)),u(r(s.value.date),1)]),o("p",null,[e[11]||(e[11]=o("strong",null,"📄 內容：",-1)),u(r(s.value.content),1)]),o("p",null,[e[12]||(e[12]=o("strong",null,"🐑 洋的想法：",-1)),u(r(s.value.yang_thoughts),1)]),o("p",null,[e[13]||(e[13]=o("strong",null,"🧸 陳的想法：",-1)),u(r(s.value.chen_thoughts),1)]),o("p",null,[e[14]||(e[14]=o("strong",null,"📌 結論：",-1)),u(r(s.value.conclusion),1)]),s.value.conclusion==="有共識與解決方法"?(f(),c("p",Z,[e[15]||(e[15]=o("strong",null,"🛠 解決方案：",-1)),u(r(s.value.solution),1)])):h("",!0)])):h("",!0)]),_:1},8,["modelValue","title"]),t(U,{modelValue:_.value,"onUpdate:modelValue":e[9]||(e[9]=l=>_.value=l),title:"新增吵架紀錄",width:"90%"},{default:a(()=>[t(F,{onSubmit:K(B,["prevent"]),"label-width":"90px"},{default:a(()=>[t(p,{label:"標題"},{default:a(()=>[t(g,{modelValue:n.value.title,"onUpdate:modelValue":e[1]||(e[1]=l=>n.value.title=l),placeholder:"請輸入"},null,8,["modelValue"])]),_:1}),t(p,{label:"日期"},{default:a(()=>[t(Y,{modelValue:n.value.date,"onUpdate:modelValue":e[2]||(e[2]=l=>n.value.date=l),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",type:"date",placeholder:"請選擇日期"},null,8,["modelValue"])]),_:1}),t(p,{label:"內容"},{default:a(()=>[t(g,{modelValue:n.value.content,"onUpdate:modelValue":e[3]||(e[3]=l=>n.value.content=l),type:"textarea",placeholder:"請輸入"},null,8,["modelValue"])]),_:1}),t(p,{label:"洋的想法"},{default:a(()=>[t(g,{modelValue:n.value.yang_thoughts,"onUpdate:modelValue":e[4]||(e[4]=l=>n.value.yang_thoughts=l),type:"textarea",placeholder:"請輸入"},null,8,["modelValue"])]),_:1}),t(p,{label:"陳的想法"},{default:a(()=>[t(g,{modelValue:n.value.chen_thoughts,"onUpdate:modelValue":e[5]||(e[5]=l=>n.value.chen_thoughts=l),type:"textarea",placeholder:"請輸入"},null,8,["modelValue"])]),_:1}),t(p,{label:"結論"},{default:a(()=>[t(S,{modelValue:n.value.conclusion,"onUpdate:modelValue":e[6]||(e[6]=l=>n.value.conclusion=l)},{default:a(()=>[t(y,{label:"有共識與解決方法"},{default:a(()=>e[16]||(e[16]=[u("有共識與解決方法")])),_:1,__:[16]}),t(y,{label:"了解彼此想法"},{default:a(()=>e[17]||(e[17]=[u("了解彼此想法")])),_:1,__:[17]}),t(y,{label:"未解決待追蹤"},{default:a(()=>e[18]||(e[18]=[u("未解決待追蹤")])),_:1,__:[18]})]),_:1},8,["modelValue"])]),_:1}),n.value.conclusion==="有共識與解決方法"?(f(),R(p,{key:0,label:"解決方案"},{default:a(()=>[t(g,{modelValue:n.value.solution,"onUpdate:modelValue":e[7]||(e[7]=l=>n.value.solution=l),type:"textarea",placeholder:"請輸入"},null,8,["modelValue"])]),_:1})):h("",!0),o("div",Q,[t(b,{onClick:D},{default:a(()=>e[19]||(e[19]=[u("清空")])),_:1,__:[19]}),t(b,{onClick:e[8]||(e[8]=l=>_.value=!1)},{default:a(()=>e[20]||(e[20]=[u("取消")])),_:1,__:[20]}),t(b,{type:"primary","native-type":"submit",loading:m.value},{default:a(()=>e[21]||(e[21]=[u("送出")])),_:1,__:[21]},8,["loading"])])]),_:1})]),_:1},8,["modelValue"]),J(o("div",W,e[22]||(e[22]=[o("span",{class:"loader-icon"},null,-1),o("span",{style:{"margin-left":"8px",color:"#252c74"}},"載入中...",-1)]),512),[[I,m.value]])])}}},ne=E(X,[["__scopeId","data-v-36b0efea"]]);export{ne as default};
