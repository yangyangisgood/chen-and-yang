import{_ as E}from"./CkuQJNrZ.js";import{_ as G}from"./DhALhEEd.js";import{_ as J,r as _,o as O,x as g,B as l,z as a,O as $,P as I,C as n,S as x,g as i,y as v,D as u,A as r,T as h,N as K,U as j}from"./CaXh2rBj.js";const P={class:"container"},R=["disabled"],q={id:"argue-list"},z=["onClick"],H={key:0},Z={key:0},Q={style:{"text-align":"right"}},M="https://script.google.com/macros/s/AKfycbxn7DMZLJTLAVeKMpCC41fIsU8r3BxUJCM_8JiGbvG1lqsn_3BRyFmL1sTCNcE5lwGK/exec",W={__name:"index",setup(X){const k=_([]),V=_(!1),f=_(!1),s=_(null),m=_(!1),o=_({title:"",date:"",content:"",yang_thoughts:"",chen_thoughts:"",conclusion:"",solution:""});function C(){o.value={title:"",date:"",content:"",yang_thoughts:"",chen_thoughts:"",conclusion:"",solution:""}}function B(d){const e=new Date(d);return isNaN(e)?d:new Date(e.getTime()+8*60*60*1e3).toISOString().split("T")[0]}function D(){m.value=!0,C(),fetch(`${M}?action=list`).then(d=>d.json()).then(d=>{k.value=d.reverse().map(e=>({...e,date:B(e.date)}))}).catch(()=>x.error("載入失敗")).finally(()=>m.value=!1)}function N(){f.value=!0}function T(){m.value=!0;const d={...o.value,timestamp:Date.now()};fetch(`${M}?action=add`,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(d),redirect:"follow"}).then(e=>e.json()).then(e=>{if(e.status==="success")x.success("新增成功"),f.value=!1,D();else throw new Error}).catch(()=>x.error("新增失敗")).finally(()=>m.value=!1)}function L(d){s.value=d,V.value=!0}return O(D),(d,e)=>{const w=E,U=i("el-dialog"),c=i("el-input"),p=i("el-form-item"),Y=i("el-date-picker"),y=i("el-radio"),S=i("el-radio-group"),b=i("el-button"),F=i("el-form"),A=G;return v(),g("div",P,[l(w,{title:"吵架紀錄","page-color":"discussion-record"}),a("button",{class:"add-btn",onClick:N,disabled:m.value},"新增",8,R),a("ul",q,[(v(!0),g($,null,I(k.value,t=>(v(),g("li",{key:t.timestamp,class:"argue-item",onClick:ee=>L(t)},[a("strong",null,r(t.title),1),u("｜"+r(t.date),1)],8,z))),128))]),l(U,{modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=t=>V.value=t),title:s.value?s.value.title:"詳細內容",width:"90%"},{default:n(()=>[s.value?(v(),g("div",H,[a("p",null,[e[10]||(e[10]=a("strong",null,"🗓 日期：",-1)),u(r(s.value.date),1)]),a("p",null,[e[11]||(e[11]=a("strong",null,"📄 內容：",-1)),u(r(s.value.content),1)]),a("p",null,[e[12]||(e[12]=a("strong",null,"🐑 洋的想法：",-1)),u(r(s.value.yang_thoughts),1)]),a("p",null,[e[13]||(e[13]=a("strong",null,"🧸 陳的想法：",-1)),u(r(s.value.chen_thoughts),1)]),a("p",null,[e[14]||(e[14]=a("strong",null,"📌 結論：",-1)),u(r(s.value.conclusion),1)]),s.value.conclusion==="有共識與解決方法"?(v(),g("p",Z,[e[15]||(e[15]=a("strong",null,"🛠 解決方案：",-1)),u(r(s.value.solution),1)])):h("",!0)])):h("",!0)]),_:1},8,["modelValue","title"]),l(U,{modelValue:f.value,"onUpdate:modelValue":e[9]||(e[9]=t=>f.value=t),title:"新增吵架紀錄",width:"90%"},{default:n(()=>[l(F,{onSubmit:K(T,["prevent"]),"label-width":"90px"},{default:n(()=>[l(p,{label:"標題"},{default:n(()=>[l(c,{modelValue:o.value.title,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.title=t),placeholder:"請輸入"},null,8,["modelValue"])]),_:1}),l(p,{label:"日期"},{default:n(()=>[l(Y,{modelValue:o.value.date,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.date=t),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",type:"date",placeholder:"請選擇日期"},null,8,["modelValue"])]),_:1}),l(p,{label:"內容"},{default:n(()=>[l(c,{modelValue:o.value.content,"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.content=t),type:"textarea",placeholder:"請輸入"},null,8,["modelValue"])]),_:1}),l(p,{label:"洋的想法"},{default:n(()=>[l(c,{modelValue:o.value.yang_thoughts,"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.yang_thoughts=t),type:"textarea",placeholder:"請輸入"},null,8,["modelValue"])]),_:1}),l(p,{label:"陳的想法"},{default:n(()=>[l(c,{modelValue:o.value.chen_thoughts,"onUpdate:modelValue":e[5]||(e[5]=t=>o.value.chen_thoughts=t),type:"textarea",placeholder:"請輸入"},null,8,["modelValue"])]),_:1}),l(p,{label:"結論"},{default:n(()=>[l(S,{modelValue:o.value.conclusion,"onUpdate:modelValue":e[6]||(e[6]=t=>o.value.conclusion=t)},{default:n(()=>[l(y,{label:"有共識與解決方法"},{default:n(()=>e[16]||(e[16]=[u("有共識與解決方法")])),_:1,__:[16]}),l(y,{label:"了解彼此想法"},{default:n(()=>e[17]||(e[17]=[u("了解彼此想法")])),_:1,__:[17]}),l(y,{label:"未解決待追蹤"},{default:n(()=>e[18]||(e[18]=[u("未解決待追蹤")])),_:1,__:[18]})]),_:1},8,["modelValue"])]),_:1}),o.value.conclusion==="有共識與解決方法"?(v(),j(p,{key:0,label:"解決方案"},{default:n(()=>[l(c,{modelValue:o.value.solution,"onUpdate:modelValue":e[7]||(e[7]=t=>o.value.solution=t),type:"textarea",placeholder:"請輸入"},null,8,["modelValue"])]),_:1})):h("",!0),a("div",Q,[l(b,{onClick:C},{default:n(()=>e[19]||(e[19]=[u("清空")])),_:1,__:[19]}),l(b,{onClick:e[8]||(e[8]=t=>f.value=!1)},{default:n(()=>e[20]||(e[20]=[u("取消")])),_:1,__:[20]}),l(b,{type:"primary","native-type":"submit",loading:m.value},{default:n(()=>e[21]||(e[21]=[u("送出")])),_:1,__:[21]},8,["loading"])])]),_:1})]),_:1},8,["modelValue"]),l(A,{visible:m.value,color:"#7c3a3a"},null,8,["visible"])])}}},ne=J(W,[["__scopeId","data-v-7219cc9d"]]);export{ne as default};
