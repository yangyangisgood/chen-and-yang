import{_ as $,r as v,o as F,x as V,z as t,B as o,L as A,D as u,O as E,P as G,C as a,R as J,T as x,g as i,y as f,A as r,U as h,N as O,V as I}from"./B5iTPn4Y.js";const K={class:"container"},R=["disabled"],j={id:"argue-list"},P=["onClick"],q={key:0},z={key:0},Z={style:{"text-align":"right"}},H={id:"loader"},U="https://script.google.com/macros/s/AKfycbxn7DMZLJTLAVeKMpCC41fIsU8r3BxUJCM_8JiGbvG1lqsn_3BRyFmL1sTCNcE5lwGK/exec",Q={__name:"index",setup(W){const k=v([]),b=v(!1),g=v(!1),d=v(null),p=v(!1),n=v({title:"",date:"",content:"",yang_thoughts:"",chen_thoughts:"",conclusion:"",solution:""});function C(){n.value={title:"",date:"",content:"",yang_thoughts:"",chen_thoughts:"",conclusion:"",solution:""}}function M(s){const e=new Date(s);return isNaN(e)?s:new Date(e.getTime()+8*60*60*1e3).toISOString().split("T")[0]}function D(){p.value=!0,C(),fetch(`${U}?action=list`).then(s=>s.json()).then(s=>{k.value=s.reverse().map(e=>({...e,date:M(e.date)}))}).catch(()=>x.error("載入失敗")).finally(()=>p.value=!1)}function L(){g.value=!0}function N(){p.value=!0;const s={...n.value,timestamp:Date.now()};fetch(`${U}?action=add`,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(s),redirect:"follow"}).then(e=>e.json()).then(e=>{if(e.status==="success")x.success("新增成功"),g.value=!1,D();else throw new Error}).catch(()=>x.error("新增失敗")).finally(()=>p.value=!1)}function T(s){d.value=s,b.value=!0}return F(D),(s,e)=>{const c=i("el-dialog"),_=i("el-input"),m=i("el-form-item"),B=i("el-date-picker"),y=i("el-radio"),Y=i("el-radio-group"),w=i("el-button"),S=i("el-form");return f(),V("div",K,[t("button",{class:"back-btn",onClick:e[0]||(e[0]=l=>s.$router.push("/"))},e[11]||(e[11]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-chevron-compact-left",viewBox:"0 0 16 16"},[t("path",{"fill-rule":"evenodd",d:"M9.224 1.553a.5.5 0 0 1 .223.67L6.56 8l2.888 5.776a.5.5 0 1 1-.894.448l-3-6a.5.5 0 0 1 0-.448l3-6a.5.5 0 0 1 .67-.223"})],-1),u(" 返回 ")])),e[25]||(e[25]=t("h1",null,"吵架記錄",-1)),t("button",{class:"add-btn",onClick:L,disabled:p.value},"新增",8,R),t("ul",j,[(f(!0),V(E,null,G(k.value,l=>(f(),V("li",{key:l.timestamp,class:"argue-item",onClick:X=>T(l)},[t("strong",null,r(l.title),1),u("｜"+r(l.date),1)],8,P))),128))]),o(c,{modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=l=>b.value=l),title:d.value?d.value.title:"詳細內容",width:"90%"},{default:a(()=>[d.value?(f(),V("div",q,[t("p",null,[e[12]||(e[12]=t("strong",null,"🗓 日期：",-1)),u(r(d.value.date),1)]),t("p",null,[e[13]||(e[13]=t("strong",null,"📄 內容：",-1)),u(r(d.value.content),1)]),t("p",null,[e[14]||(e[14]=t("strong",null,"🐑 洋的想法：",-1)),u(r(d.value.yang_thoughts),1)]),t("p",null,[e[15]||(e[15]=t("strong",null,"🧸 陳的想法：",-1)),u(r(d.value.chen_thoughts),1)]),t("p",null,[e[16]||(e[16]=t("strong",null,"📌 結論：",-1)),u(r(d.value.conclusion),1)]),d.value.conclusion==="有共識與解決方法"?(f(),V("p",z,[e[17]||(e[17]=t("strong",null,"🛠 解決方案：",-1)),u(r(d.value.solution),1)])):h("",!0)])):h("",!0)]),_:1},8,["modelValue","title"]),o(c,{modelValue:g.value,"onUpdate:modelValue":e[10]||(e[10]=l=>g.value=l),title:"新增吵架紀錄",width:"90%"},{default:a(()=>[o(S,{onSubmit:O(N,["prevent"]),"label-width":"90px"},{default:a(()=>[o(m,{label:"標題"},{default:a(()=>[o(_,{modelValue:n.value.title,"onUpdate:modelValue":e[2]||(e[2]=l=>n.value.title=l),placeholder:"請輸入"},null,8,["modelValue"])]),_:1}),o(m,{label:"日期"},{default:a(()=>[o(B,{modelValue:n.value.date,"onUpdate:modelValue":e[3]||(e[3]=l=>n.value.date=l),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",type:"date",placeholder:"請選擇日期"},null,8,["modelValue"])]),_:1}),o(m,{label:"內容"},{default:a(()=>[o(_,{modelValue:n.value.content,"onUpdate:modelValue":e[4]||(e[4]=l=>n.value.content=l),type:"textarea",placeholder:"請輸入"},null,8,["modelValue"])]),_:1}),o(m,{label:"洋的想法"},{default:a(()=>[o(_,{modelValue:n.value.yang_thoughts,"onUpdate:modelValue":e[5]||(e[5]=l=>n.value.yang_thoughts=l),type:"textarea",placeholder:"請輸入"},null,8,["modelValue"])]),_:1}),o(m,{label:"陳的想法"},{default:a(()=>[o(_,{modelValue:n.value.chen_thoughts,"onUpdate:modelValue":e[6]||(e[6]=l=>n.value.chen_thoughts=l),type:"textarea",placeholder:"請輸入"},null,8,["modelValue"])]),_:1}),o(m,{label:"結論"},{default:a(()=>[o(Y,{modelValue:n.value.conclusion,"onUpdate:modelValue":e[7]||(e[7]=l=>n.value.conclusion=l)},{default:a(()=>[o(y,{label:"有共識與解決方法"},{default:a(()=>e[18]||(e[18]=[u("有共識與解決方法")])),_:1,__:[18]}),o(y,{label:"了解彼此想法"},{default:a(()=>e[19]||(e[19]=[u("了解彼此想法")])),_:1,__:[19]}),o(y,{label:"未解決待追蹤"},{default:a(()=>e[20]||(e[20]=[u("未解決待追蹤")])),_:1,__:[20]})]),_:1},8,["modelValue"])]),_:1}),n.value.conclusion==="有共識與解決方法"?(f(),I(m,{key:0,label:"解決方案"},{default:a(()=>[o(_,{modelValue:n.value.solution,"onUpdate:modelValue":e[8]||(e[8]=l=>n.value.solution=l),type:"textarea",placeholder:"請輸入"},null,8,["modelValue"])]),_:1})):h("",!0),t("div",Z,[o(w,{onClick:C},{default:a(()=>e[21]||(e[21]=[u("清空")])),_:1,__:[21]}),o(w,{onClick:e[9]||(e[9]=l=>g.value=!1)},{default:a(()=>e[22]||(e[22]=[u("取消")])),_:1,__:[22]}),o(w,{type:"primary","native-type":"submit",loading:p.value},{default:a(()=>e[23]||(e[23]=[u("送出")])),_:1,__:[23]},8,["loading"])])]),_:1})]),_:1},8,["modelValue"]),A(t("div",H,e[24]||(e[24]=[t("span",{class:"loader-icon"},null,-1),t("span",{style:{"margin-left":"8px",color:"#252c74"}},"載入中...",-1)]),512),[[J,p.value]])])}}},le=$(Q,[["__scopeId","data-v-00999406"]]);export{le as default};
